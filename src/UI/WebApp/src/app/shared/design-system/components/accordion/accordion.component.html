<div [class]="accordionClasses()">
  @for (item of items(); track item.id()) {
    <div
      class="ds-accordion-item"
      [class.ds-accordion-item--expanded]="isExpanded(item.id())"
      [class.ds-accordion-item--disabled]="item.disabled()"
    >
      <button
        type="button"
        class="ds-accordion-header"
        [id]="'accordion-header-' + item.id()"
        [attr.aria-expanded]="isExpanded(item.id())"
        [attr.aria-controls]="'accordion-panel-' + item.id()"
        [disabled]="item.disabled()"
        (click)="toggleItem(item.id())"
      >
        <span class="ds-accordion-title">{{ item.title() }}</span>
        <span class="ds-accordion-icon" [class.ds-accordion-icon--expanded]="isExpanded(item.id())">
          <svg viewBox="0 0 16 16" fill="none" aria-hidden="true">
            <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </button>

      <div
        class="ds-accordion-panel"
        [id]="'accordion-panel-' + item.id()"
        role="region"
        [attr.aria-labelledby]="'accordion-header-' + item.id()"
        [class.ds-accordion-panel--open]="isExpanded(item.id())"
      >
        <div class="ds-accordion-content">
          <ng-container [ngTemplateOutlet]="itemContent" [ngTemplateOutletContext]="{$implicit: item}">
          </ng-container>
        </div>
      </div>
    </div>
  }
</div>

<ng-template #itemContent let-item>
  <ng-content />
</ng-template>
