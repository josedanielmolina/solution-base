<div class="ds-textarea-container">
  <!-- Label -->
  @if (label()) {
    <label [for]="id()" class="ds-textarea-label">
      {{ label() }}
      @if (required()) {
        <span class="ds-textarea-required" aria-hidden="true">*</span>
      }
    </label>
  }

  <!-- Textarea Wrapper -->
  <div [class]="wrapperClasses()">
    <textarea
      [id]="id()"
      [placeholder]="placeholder()"
      [value]="value()"
      [disabled]="disabled()"
      [readonly]="readonly()"
      [required]="required()"
      [rows]="rows()"
      [attr.maxlength]="maxLength()"
      [attr.aria-invalid]="hasError()"
      [attr.aria-describedby]="error() ? id() + '-error' : hint() ? id() + '-hint' : null"
      class="ds-textarea"
      [class.ds-textarea--auto-resize]="autoResize()"
      (input)="onInput($event)"
      (focus)="onFocus($event)"
      (blur)="onBlur($event)"
    ></textarea>
  </div>

  <!-- Footer (Hint/Error + Counter) -->
  <div class="ds-textarea-footer">
    <div class="ds-textarea-messages">
      @if (hint() && !hasError()) {
        <p [id]="id() + '-hint'" class="ds-textarea-hint">
          {{ hint() }}
        </p>
      }

      @if (hasError()) {
        <p [id]="id() + '-error'" class="ds-textarea-error" role="alert">
          {{ error() }}
        </p>
      }
    </div>

    @if (showCount()) {
      <span class="ds-textarea-count" [class.ds-textarea-count--limit]="maxLength() && charCount() >= maxLength()!">
        {{ charCountText() }}
      </span>
    }
  </div>
</div>
