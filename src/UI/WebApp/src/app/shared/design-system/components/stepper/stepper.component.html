<div [class]="stepperClasses()" role="list">
  @for (step of steps(); track step.id; let i = $index) {
    <div
      [class]="getStepClasses(i, step)"
      role="listitem"
      (click)="goToStep(i)"
    >
      <div class="ds-step-indicator">
        <span class="ds-step-number">
          @if (step.completed && !step.error && i < currentStep()) {
            <svg viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M13.5 4.5L6 12L2.5 8.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          } @else if (step.error) {
            <svg viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          } @else {
            {{ i + 1 }}
          }
        </span>

        @if (!isLastStep(i)) {
          <span class="ds-step-connector"></span>
        }
      </div>

      <div class="ds-step-content">
        <span class="ds-step-label">
          {{ step.label }}
          @if (step.optional) {
            <span class="ds-step-optional">(Opcional)</span>
          }
        </span>
        @if (step.description) {
          <span class="ds-step-description">{{ step.description }}</span>
        }
      </div>
    </div>
  }
</div>
