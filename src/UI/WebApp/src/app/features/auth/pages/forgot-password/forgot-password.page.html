<div class="forgot-password-container">
    <div class="forgot-password-card">
        @if (!emailSent()) {
        <h1>¿Olvidaste tu Contraseña?</h1>
        <p class="subtitle">Ingresa tu correo electrónico y te enviaremos un código de recuperación</p>

        <form [formGroup]="emailForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="email">Correo Electrónico</label>
                <input type="email" id="email" formControlName="email" placeholder="correo@ejemplo.com"
                    [class.error]="emailForm.get('email')?.invalid && emailForm.get('email')?.touched">
                @if (emailForm.get('email')?.invalid && emailForm.get('email')?.touched) {
                <span class="error-message">
                    @if (emailForm.get('email')?.errors?.['required']) {
                    El correo es requerido
                    }
                    @if (emailForm.get('email')?.errors?.['email']) {
                    El correo no es válido
                    }
                </span>
                }
            </div>

            @if (errorMessage()) {
            <div class="alert alert-error">
                {{ errorMessage() }}
            </div>
            }

            <button type="submit" class="btn btn-primary btn-block" [disabled]="emailForm.invalid || loading()">
                @if (loading()) {
                <span>Enviando...</span>
                } @else {
                <span>Enviar Código</span>
                }
            </button>

            <div class="form-actions">
                <a routerLink="/login" class="back-link">Volver al Inicio de Sesión</a>
            </div>
        </form>
        } @else {
        <div class="success-message">
            <div class="success-icon">✓</div>
            <h2>¡Código Enviado!</h2>
            <p>Si el correo existe en nuestro sistema, recibirás un código de 6 dígitos para restablecer tu contraseña.
            </p>
            <button class="btn btn-primary btn-block" (click)="goToReset()">
                Ingresar Código
            </button>
            <div class="form-actions">
                <a routerLink="/login" class="back-link">Volver al Inicio de Sesión</a>
            </div>
        </div>
        }
    </div>
</div>