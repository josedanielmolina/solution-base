<div class="reset-password-container">
    <div class="reset-password-card">
        <h1>Restablecer Contraseña</h1>
        <p class="subtitle">Ingresa el código de 6 dígitos que recibiste y tu nueva contraseña</p>

        <form [formGroup]="resetForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="email">Correo Electrónico</label>
                <input type="email" id="email" formControlName="email" placeholder="correo@ejemplo.com"
                    [class.error]="resetForm.get('email')?.invalid && resetForm.get('email')?.touched">
                @if (resetForm.get('email')?.invalid && resetForm.get('email')?.touched) {
                <span class="error-message">
                    @if (resetForm.get('email')?.errors?.['required']) {
                    El correo es requerido
                    }
                    @if (resetForm.get('email')?.errors?.['email']) {
                    El correo no es válido
                    }
                </span>
                }
            </div>

            <div class="form-group">
                <label for="code">Código de Verificación</label>
                <input type="text" id="code" formControlName="code" placeholder="123456" maxlength="6"
                    [class.error]="resetForm.get('code')?.invalid && resetForm.get('code')?.touched">
                @if (resetForm.get('code')?.invalid && resetForm.get('code')?.touched) {
                <span class="error-message">
                    @if (resetForm.get('code')?.errors?.['required']) {
                    El código es requerido
                    }
                    @if (resetForm.get('code')?.errors?.['pattern']) {
                    El código debe ser de 6 dígitos
                    }
                </span>
                }
            </div>

            <div class="form-group">
                <label for="newPassword">Nueva Contraseña</label>
                <input type="password" id="newPassword" formControlName="newPassword" placeholder="••••••••"
                    [class.error]="resetForm.get('newPassword')?.invalid && resetForm.get('newPassword')?.touched">
                @if (resetForm.get('newPassword')?.invalid && resetForm.get('newPassword')?.touched) {
                <span class="error-message">
                    @if (resetForm.get('newPassword')?.errors?.['required']) {
                    La nueva contraseña es requerida
                    }
                    @if (resetForm.get('newPassword')?.errors?.['minlength']) {
                    La contraseña debe tener al menos 8 caracteres
                    }
                </span>
                }
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirmar Nueva Contraseña</label>
                <input type="password" id="confirmPassword" formControlName="confirmPassword" placeholder="••••••••"
                    [class.error]="resetForm.get('confirmPassword')?.invalid && resetForm.get('confirmPassword')?.touched">
                @if (resetForm.get('confirmPassword')?.invalid && resetForm.get('confirmPassword')?.touched) {
                <span class="error-message">La confirmación es requerida</span>
                }
            </div>

            @if (errorMessage()) {
            <div class="alert alert-error">
                {{ errorMessage() }}
            </div>
            }

            @if (successMessage()) {
            <div class="alert alert-success">
                {{ successMessage() }}
            </div>
            }

            <button type="submit" class="btn btn-primary btn-block" [disabled]="resetForm.invalid || loading()">
                @if (loading()) {
                <span>Restableciendo...</span>
                } @else {
                <span>Restablecer Contraseña</span>
                }
            </button>

            <div class="form-actions">
                <a routerLink="/login" class="back-link">Volver al Inicio de Sesión</a>
            </div>
        </form>
    </div>
</div>